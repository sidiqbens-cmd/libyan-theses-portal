<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù†Ø¶Ù…Ø§Ù… Ù…ÙƒØªØ¨Ø© | Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ù„ÙŠØ¨ÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-size: 11px; background-color: #f1f5f9; font-family: sans-serif; }
        .form-card { background: white; border: 1px solid #cbd5e1; width: 100%; max-width: 500px; padding: 15px; }
        label { font-weight: bold; color: #1e3a8a; display: block; margin-top: 8px; }
        input { width: 100%; padding: 6px; border: 1px solid #94a3b8; border-radius: 2px; font-size: 11px; margin-top: 2px; }
        .hint { color: #64748b; font-size: 10px; margin-top: 2px; display: block; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-2">

    <div class="form-card">
        <div class="text-center mb-4 border-b pb-2">
            <h1 class="text-blue-900 font-bold text-sm text-center italic">Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ù„ÙŠØ¨ÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯</h1>
            <p class="text-gray-600 font-bold">Ù†Ù…ÙˆØ°Ø¬ Ø§Ù†Ø¶Ù…Ø§Ù… Ù…ÙƒØªØ¨Ø©</p>
        </div>

        <form id="joinForm" class="space-y-2">
            <div>
                <label>Ø§Ø³Ù… Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø±Ø³Ù…ÙŠ</label>
                <input type="text" id="libName" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ù…ÙƒØªØ¨Ø© ÙƒÙ„ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©" required>
            </div>

            <div class="grid grid-cols-2 gap-2">
                <div>
                    <label>Ø§Ù„ØªØ¨Ø¹ÙŠØ©</label>
                    <input type="text" id="affiliation" placeholder="Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© Ø£Ùˆ Ø§Ù„ÙˆØ²Ø§Ø±Ø©" required>
                </div>
                <div>
                    <label>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„ØªÙˆØ§ØµÙ„</label>
                    <input type="text" id="contactPerson" required>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-2">
                <div>
                    <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                    <input type="tel" id="libPhone" required>
                </div>
                <div>
                    <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                    <input type="email" id="libEmail" required>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-2">
                <div>
                    <label>Ø±Ø§Ø¨Ø· Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…ÙƒØªØ¨Ø©</label>
                    <input type="url" id="libWeb" placeholder="https://...">
                </div>
                <div>
                    <label>Ø±Ø§Ø¨Ø· ØµÙØ­Ø© Ø§Ù„ÙÙŠØ³Ø¨ÙˆÙƒ</label>
                    <input type="url" id="libFb" placeholder="https://facebook.com/...">
                </div>
            </div>

            <div>
                <label>Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„</label>
                <input type="text" id="libHours" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ù…Ù† Ø§Ù„Ø£Ø­Ø¯ Ù„Ù„Ø®Ù…ÙŠØ³ (9:00 Øµ - 2:00 Ø¸)">
            </div>

            <div class="bg-blue-50 p-2 border border-blue-200 mt-2">
                <label>Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (Google Maps)</label>
                <div class="flex gap-2">
                    <input type="url" id="libMap" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„Ø±Ø§Ø¨Ø· Ù‡Ù†Ø§..." required>
                    <a href="https://www.google.com/maps" target="_blank" class="bg-blue-800 text-white px-2 py-1 rounded text-[10px] flex items-center shrink-0">
                        ÙØªØ­ Ø§Ù„Ø®Ø±ÙŠØ·Ø© ğŸ“
                    </a>
                </div>
                <span class="hint">* Ù‚Ù… Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…ÙƒØªØ¨Ø© ÙÙŠ Ø§Ù„Ø®Ø±ÙŠØ·Ø©ØŒ Ø§Ø®ØªØ± "Ù…Ø´Ø§Ø±ÙƒØ©" Ø«Ù… "Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·" ÙˆÙ„ØµÙ‚Ù‡ Ù‡Ù†Ø§.</span>
            </div>

            <button type="submit" class="w-full bg-blue-900 text-white font-bold py-2 mt-4 rounded hover:bg-blue-800 transition text-sm">Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</button>
        </form>
    </div>

    <script>
        const firebaseConfig = { 
            apiKey: "AIzaSyAogBGo2_OzNito9D9AXVyAjSjmu-DYotc", 
            authDomain: "libyan-theses-portal.firebaseapp.com", 
            projectId: "libyan-theses-portal", 
            databaseURL: "https://libyan-theses-portal-default-rtdb.europe-west1.firebasedatabase.app", 
            appId: "1:80818219253:web:5ca7224ac6a5c8a7377dbc" 
        };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        document.getElementById('joinForm').onsubmit = (e) => {
            e.preventDefault();
            
            const libName = document.getElementById('libName').value;
            const data = {
                affiliation: document.getElementById('affiliation').value,
                contact: document.getElementById('contactPerson').value,
                phone: document.getElementById('libPhone').value,
                email: document.getElementById('libEmail').value,
                website: document.getElementById('libWeb').value,
                facebook: document.getElementById('libFb').value,
                map: document.getElementById('libMap').value,
                hours: document.getElementById('libHours').value,
                timestamp: Date.now()
            };

            // Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ
            db.ref('join_requests').push({ libName, ...data });

            // ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØªÙŠ ØªØ¸Ù‡Ø± Ù„Ù„Ø¬Ù…Ù‡ÙˆØ± ÙÙˆØ±Ø§Ù‹
            db.ref('libraries_info/' + libName).set({
                info: `Ø§Ù„ØªØ¨Ø¹ÙŠØ©: ${data.affiliation} <br> Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯: ${data.hours} <br> Ù‡Ø§ØªÙ: ${data.phone} <br> Ø¥ÙŠÙ…ÙŠÙ„: ${data.email}`,
                map: data.map,
                fb: data.facebook,
                web: data.website
            }).then(() => {
                alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø¨Ù†Ø¬Ø§Ø­ âœ…");
                document.getElementById('joinForm').reset();
            });
        };
    </script>
</body>
</html>
