<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„Ø¨Ø­Ø« | Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ù„ÙŠØ¨ÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-size: 11px; background-color: #f8fafc; padding: 10px; }
        .filter-card { background: white; border-radius: 4px; border-top: 4px solid #1e3a8a; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; }
        input, select { width: 100%; padding: 5px; border: 1px solid #cbd5e1; border-radius: 3px; font-size: 11px; outline: none; }
        th { background: #1e3a8a; color: white; padding: 6px; border: 1px solid #cbd5e1; }
        td { padding: 4px; border: 1px solid #e2e8f0; text-align: center; background: white; }
    </style>
</head>
<body>
    <div class="text-center mb-4">
        <h1 class="text-xl font-bold text-blue-900">Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ù„ÙŠØ¨ÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯</h1>
        <p class="text-gray-600 text-[10px]">Ù…Ù†Ø¸ÙˆÙ…Ø© Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¹Ù„Ù…ÙŠØ© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©</p>
    </div>

    <div class="filter-card grid grid-cols-6 gap-2 bg-blue-50">
        <input type="text" id="pSearch" placeholder="ğŸ” Ø¨Ø­Ø« Ø´Ø§Ù…Ù„..." onkeyup="publicSearch()">
        <input type="text" id="pUni" placeholder="ØªØµÙÙŠØ© Ø¨Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©" onkeyup="publicSearch()">
        <input type="text" id="pColl" placeholder="ØªØµÙÙŠØ© Ø¨Ø§Ù„ÙƒÙ„ÙŠØ©" onkeyup="publicSearch()">
        <input type="text" id="pDept" placeholder="ØªØµÙÙŠØ© Ø¨Ø§Ù„Ù‚Ø³Ù…" onkeyup="publicSearch()">
        <input type="text" id="pYear" placeholder="ØªØµÙÙŠØ© Ø¨Ø§Ù„Ø³Ù†Ø©" onkeyup="publicSearch()">
        <select id="pDeg" onchange="publicSearch()"><option value="">ÙƒÙ„ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª</option><option>Ù…Ø§Ø¬Ø³ØªÙŠØ±</option><option>Ø¯ÙƒØªÙˆØ±Ø§Ø©</option></select>
    </div>

    <div class="bg-white rounded shadow overflow-hidden">
        <table class="w-full border-collapse">
            <thead>
                <tr>
                    <th class="w-1/4">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th><th>Ø§Ù„Ø¨Ø§Ø­Ø«</th><th>Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©</th><th>Ø§Ù„ÙƒÙ„ÙŠØ©</th><th>Ø§Ù„Ù‚Ø³Ù…</th><th>Ø§Ù„Ø³Ù†Ø©</th><th>Ø§Ù„Ø¯Ø±Ø¬Ø©</th><th>Ø±Ù‚Ù… Ø§Ù„Ø±Ø³Ø§Ù„Ø©</th><th>Ø§Ù„Ù…Ø³ØªÙ†Ø¯</th>
                </tr>
            </thead>
            <tbody id="publicBody"></tbody>
        </table>
    </div>

<script>
    const firebaseConfig = { apiKey: "AIzaSyAogBGo2_OzNito9D9AXVyAjSjmu-DYotc", authDomain: "libyan-theses-portal.firebaseapp.com", projectId: "libyan-theses-portal", databaseURL: "https://libyan-theses-portal-default-rtdb.europe-west1.firebasedatabase.app", appId: "1:80818219253:web:5ca7224ac6a5c8a7377dbc" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    db.ref('theses_data').on('value', snap => {
        const tbody = document.getElementById('publicBody');
        tbody.innerHTML = '';
        snap.forEach(child => {
            const v = child.val();
            tbody.innerHTML += `<tr>
                <td class="text-right font-bold text-blue-900">${v.title}</td><td>${v.author}</td><td>${v.university}</td><td>${v.college}</td><td>${v.department}</td><td>${v.year}</td><td>${v.degree}</td><td>${v.serialNum}</td>
                <td>${v.link ? `<a href="${v.link}" target="_blank" class="text-blue-600 font-bold">Ø¹Ø±Ø¶</a>` : '-'}</td>
            </tr>`;
        });
    });

    function publicSearch() {
        const gs = document.getElementById('pSearch').value.toLowerCase();
        const u = document.getElementById('pUni').value.toLowerCase();
        const c = document.getElementById('pColl').value.toLowerCase();
        const d = document.getElementById('pDept').value.toLowerCase();
        const y = document.getElementById('pYear').value.toLowerCase();
        const deg = document.getElementById('pDeg').value;
        
        document.querySelectorAll('#publicBody tr').forEach(row => {
            const t = row.innerText.toLowerCase();
            const cells = row.getElementsByTagName('td');
            const match = t.includes(gs) && cells[2].innerText.toLowerCase().includes(u) && cells[3].innerText.toLowerCase().includes(c) && cells[4].innerText.toLowerCase().includes(d) && cells[5].innerText.toLowerCase().includes(y) && (deg=="" || cells[6].innerText==deg);
            row.style.display = match ? "" : "none";
        });
    }
</script>
</body>
</html>
