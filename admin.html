<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฅุฏุงุฑุฉ ุงูููุฑุณ ุงูููุจู ุงูููุญุฏ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-family: system-ui; background-color: #f1f5f9; font-size: 12px; }
        input, select, textarea { border: 1px solid #cbd5e1 !important; transition: all 0.2s; }
        input:focus { border-color: #1e3a8a !important; box-shadow: 0 0 0 2px rgba(30, 58, 138, 0.1); }
        .card-link:hover { transform: translateY(-2px); }
    </style>
</head>
<body class="p-2">

<div class="max-w-5xl mx-auto">
    <h1 class="text-lg font-bold text-center mb-4 text-blue-900">ูุฑูุฒ ููุงุฏุฉ ุงูููุฑุณ ุงูููุจู ุงูููุญุฏ</h1>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mb-6">
        
        <a href="dashboard.html" class="card-link p-3 bg-white border-b-4 border-green-500 rounded shadow-sm flex flex-col items-center group transition-all">
            <span class="text-2xl mb-1 group-hover:scale-110 transition">๐ข</span>
            <span class="font-bold text-green-800 text-xs">ุฅุฏุงุฑุฉ ุงูููุชุจุงุช</span>
            <span id="requestsCount" class="text-[10px] text-gray-500 font-medium text-center mt-1 italic">ุฌุงุฑู ุงููุญุต...</span>
        </a>

        <a href="#thesisForm" class="card-link p-3 bg-white border-b-4 border-blue-500 rounded shadow-sm flex flex-col items-center group transition-all">
            <span class="text-2xl mb-1 group-hover:scale-110 transition">๐</span>
            <span class="font-bold text-blue-800 text-xs">ุฅุถุงูุฉ ุฑุณุงูุฉ ุนูููุฉ</span>
            <span class="text-[10px] text-gray-400 mt-1">ุฅุฏุฎุงู ุจูุงูุงุช ูุฏูู</span>
        </a>

        <a href="index.html" class="card-link p-3 bg-white border-b-4 border-purple-500 rounded shadow-sm flex flex-col items-center group transition-all">
            <span class="text-2xl mb-1 group-hover:scale-110 transition">๐</span>
            <span class="font-bold text-purple-800 text-xs">ูุงุฌูุฉ ุงูุจุญุซ ุงูุนุงูุฉ</span>
            <span class="text-[10px] text-gray-400 mt-1">ูุนุงููุฉ ุงููููุน ููุฌูููุฑ</span>
        </a>
    </div>

    <hr class="border-gray-300 mb-6">

    <div id="thesisForm" class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
        <h2 class="text-sm font-bold mb-4 text-blue-900 border-r-4 border-blue-900 pr-2">ุฅุฏุฎุงู ุฑุณุงูุฉ ุนูููุฉ ุฌุฏูุฏุฉ</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
            <div>
                <label class="block text-[10px] font-bold text-gray-600 mb-1">ุงุณู ุงูุจุงุญุซ</label>
                <input type="text" id="researcher" placeholder="ูุซุงู: ูุญูุฏ ุนูู" class="w-full p-1.5 rounded text-xs bg-slate-50">
            </div>
            <div>
                <label class="block text-[10px] font-bold text-gray-600 mb-1">ุนููุงู ุงูุฑุณุงูุฉ</label>
                <input type="text" id="title" placeholder="ุงูุนููุงู ุงููุงูู" class="w-full p-1.5 rounded text-xs bg-slate-50 font-bold">
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
            <div>
                <label class="block text-[10px] font-bold text-gray-600 mb-1">ุงุณู ุงููุดุฑู</label>
                <input type="text" id="supervisor" class="w-full p-1.5 rounded text-xs bg-slate-50">
            </div>
            <div>
                <label class="block text-[10px] font-bold text-gray-600 mb-1">ุงูุฌุงูุนุฉ</label>
                <input type="text" id="university" class="w-full p-1.5 rounded text-xs bg-slate-50">
            </div>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-3">
            <div>
                <label class="block text-[10px] font-bold text-gray-600 mb-1">ุงููููุฉ</label>
                <input type="text" id="faculty" class="w-full p-1.5 rounded text-xs bg-slate-50">
            </div>
            <div>
                <label class="block text-[10px] font-bold text-gray-600 mb-1">ุงููุณู</label>
                <input type="text" id="department" class="w-full p-1.5 rounded text-xs bg-slate-50">
            </div>
            <div>
                <label class="block text-[10px] font-bold text-blue-900 mb-1">ุงูุณูุฉ</label>
                <input type="number" id="year" placeholder="2026" class="w-full p-1.5 rounded text-xs bg-slate-50">
            </div>
            <div>
                <label class="block text-[10px] font-bold text-blue-900 mb-1">ุฑูู ุงูุฑุณุงูุฉ</label>
                <input type="text" id="thesisId" placeholder="ID-001" class="w-full p-1.5 rounded text-xs bg-slate-50">
            </div>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-3">
            <div>
                <label class="block text-[10px] font-bold text-blue-900 mb-1">ุงูุฏุฑุฌุฉ</label>
                <select id="degree" class="w-full p-1.5 rounded bg-slate-50 text-xs">
                    <option value="ูุงุฌุณุชูุฑ">ูุงุฌุณุชูุฑ</option>
                    <option value="ุฏูุชูุฑุงู">ุฏูุชูุฑุงู</option>
                </select>
            </div>
            <div>
                <label class="block text-[10px] font-bold text-blue-900 mb-1">ุงูุญุงูุฉ</label>
                <select id="status" class="w-full p-1.5 rounded bg-slate-50 text-xs">
                    <option value="ูุชููุฑุฉ">ูุชููุฑุฉ โ</option>
                    <option value="ุบูุฑ ูุชููุฑุฉ">ุบูุฑ ูุชููุฑุฉ โ</option>
                </select>
            </div>
            <div class="col-span-2">
                <label class="block text-[10px] font-bold text-blue-900 mb-1">ุฑุงุจุท PDF</label>
                <input type="url" id="thesisUrl" placeholder="https://..." class="w-full p-1.5 rounded text-xs bg-slate-50">
            </div>
        </div>

        <div class="mb-4">
            <label class="block text-[10px] font-bold text-gray-600 mb-1">ููุงุญุธุงุช</label>
            <textarea id="notes" rows="1" class="w-full p-1.5 rounded text-xs bg-slate-50"></textarea>
        </div>

        <button onclick="saveToDatabase()" class="w-full py-2.5 bg-blue-900 text-white rounded font-bold text-xs hover:bg-blue-800 transition-all shadow-md">
            ๐พ ุญูุธ ุงูุฑุณุงูุฉ ูู ุงูููุฑุณ
        </button>
    </div>
</div>

<script>
    // ุฅุนุฏุงุฏุงุช Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyAogBGo2_OzNito9D9AXVyAjSjmu-DYotc",
        authDomain: "libyan-theses-portal.firebaseapp.com",
        projectId: "libyan-theses-portal",
        databaseURL: "https://libyan-theses-portal-default-rtdb.europe-west1.firebasedatabase.app",
        appId: "1:80818219253:web:5ca7224ac6a5c8a7377dbc"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // ุฏุงูุฉ ุงูุญูุธ
    function saveToDatabase() {
        const data = {
            researcher: document.getElementById('researcher').value,
            title: document.getElementById('title').value,
            supervisor: document.getElementById('supervisor').value,
            university: document.getElementById('university').value,
            faculty: document.getElementById('faculty').value,
            department: document.getElementById('department').value,
            year: document.getElementById('year').value,
            thesisId: document.getElementById('thesisId').value,
            degree: document.getElementById('degree').value,
            status: document.getElementById('status').value,
            thesisUrl: document.getElementById('thesisUrl').value,
            notes: document.getElementById('notes').value,
            timestamp: Date.now()
        };

        if(!data.title || !data.researcher) {
            alert("ูุฑุฌู ุฅุฏุฎุงู ุงุณู ุงูุจุงุญุซ ูุนููุงู ุงูุฑุณุงูุฉ");
            return;
        }

        database.ref('theses').push(data).then(() => {
            alert("ุชู ุงูุญูุธ ุจูุฌุงุญ โ");
            document.querySelectorAll('input, textarea, select').forEach(el => {
                if(el.tagName !== 'SELECT') el.value = '';
            });
        }).catch(err => alert("ุฎุทุฃ: " + err));
    }

    // ููุฏ ุงูุนุฏุงุฏ ุงูุญู ูุทูุจุงุช ุงูููุชุจุงุช (ูุนูู ุชููุงุฆูุงู ุนูุฏ ูุชุญ ุงูุตูุญุฉ)
    database.ref('libraries_directory').on('value', (snapshot) => {
        const count = snapshot.numChildren();
        const countElement = document.getElementById('requestsCount');
        if(count > 0) {
            countElement.innerHTML = `<span class="bg-red-100 text-red-600 px-2 py-0.5 rounded-full border border-red-200 animate-pulse">ููุฌุฏ ${count} ุทูุจุงุช ุฌุฏูุฏุฉ</span>`;
        } else {
            countElement.innerHTML = `<span class="text-gray-400">ูุง ุชูุฌุฏ ุทูุจุงุช ุงูุชุธุงุฑ</span>`;
        }
    });
</script>

</body>
</html>
