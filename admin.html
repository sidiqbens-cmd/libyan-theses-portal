<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ù„ÙŠØ¨ÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯ - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-family: system-ui; background-color: #f1f5f9; font-size: 11px; }
        .nav-card { transition: all 0.2s; border-bottom: 4px solid transparent; }
        .nav-card:hover { transform: translateY(-3px); border-bottom-color: #1e3a8a; }
        input, select { border: 1px solid #cbd5e1 !important; padding: 6px !important; outline: none; }
    </style>
</head>
<body class="p-4">

<div class="max-w-4xl mx-auto">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mb-6">
        
        <a href="admin_libraries.html" class="nav-card bg-white p-4 rounded-xl shadow-sm flex flex-col items-center group text-center border">
            <span class="text-2xl mb-1">ğŸ¢</span>
            <span class="font-bold text-slate-700 text-xs">Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª</span>
            <div id="countDisplay" class="mt-1 text-blue-600 font-bold">Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...</div>
        </a>

        <a href="#thesisForm" class="nav-card bg-white p-4 rounded-xl shadow-sm flex flex-col items-center border">
            <span class="text-2xl mb-1">ğŸ“</span>
            <span class="font-bold text-slate-700 text-xs">Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ø¦Ù„ Ø¹Ù„Ù…ÙŠØ©</span>
            <span class="text-[9px] text-slate-400">Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ Ù…Ø¨Ø§Ø´Ø±</span>
        </a>

        <a href="index.html" class="nav-card bg-white p-4 rounded-xl shadow-sm flex flex-col items-center border">
            <span class="text-2xl mb-1">ğŸ”</span>
            <span class="font-bold text-slate-700 text-xs">ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø­Ø«</span>
            <span class="text-[9px] text-slate-400">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±</span>
        </a>
    </div>

    <div id="thesisForm" class="bg-white p-5 rounded-2xl shadow-sm border border-slate-200">
        <h2 class="text-xs font-bold mb-4 border-r-4 border-blue-900 pr-2">Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
        <div class="grid grid-cols-2 gap-3 mb-3">
            <input type="text" id="researcher" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø«" class="rounded bg-slate-50">
            <input type="text" id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©" class="rounded bg-slate-50 font-bold">
        </div>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4">
            <input type="text" id="university" placeholder="Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©" class="rounded">
            <input type="number" id="year" placeholder="Ø³Ù†Ø© Ø§Ù„ØªØ®Ø±Ø¬" class="rounded">
            <select id="degree" class="rounded font-bold"><option>Ù…Ø§Ø¬Ø³ØªÙŠØ±</option><option>Ø¯ÙƒØªÙˆØ±Ø§Ù‡</option></select>
            <select id="status" class="rounded text-green-700 font-bold"><option>Ù…ØªÙˆÙØ±Ø© âœ…</option><option>ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© âŒ</option></select>
        </div>
        <button onclick="saveData()" class="w-full py-2.5 bg-blue-900 text-white rounded-lg font-bold text-xs shadow-md hover:bg-blue-800 transition-all">
            ğŸ’¾ Ø­ÙØ¸ ÙÙŠ Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ù…ÙˆØ­Ø¯
        </button>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyAogBGo2_OzNito9D9AXVyAjSjmu-DYotc",
        authDomain: "libyan-theses-portal.firebaseapp.com",
        projectId: "libyan-theses-portal",
        databaseURL: "https://libyan-theses-portal-default-rtdb.europe-west1.firebasedatabase.app",
        appId: "1:80818219253:web:5ca7224ac6a5c8a7377dbc"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø­ÙŠ (Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù€ Initialization)
    db.ref('libraries_directory').on('value', (snap) => {
        const count = snap.numChildren() || 0;
        const display = document.getElementById('countDisplay');
        if(count > 0) {
            display.innerHTML = `<span class="bg-red-600 text-white px-2 py-0.5 rounded-full text-[10px] animate-pulse">ÙŠÙˆØ¬Ø¯ ${count} Ø·Ù„Ø¨Ø§Øª</span>`;
        } else {
            display.innerText = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª";
            display.className = "mt-1 text-slate-400 font-bold";
        }
    });

    function saveData() {
        const data = {
            researcher: document.getElementById('researcher').value,
            title: document.getElementById('title').value,
            university: document.getElementById('university').value,
            year: document.getElementById('year').value,
            degree: document.getElementById('degree').value,
            status: document.getElementById('status').value,
            timestamp: Date.now()
        };
        if(!data.title || !data.researcher) return alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
        db.ref('theses').push(data).then(() => {
            alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ âœ…");
            document.querySelectorAll('input').forEach(i => i.value = '');
        });
    }
</script>
</body>
</html>
