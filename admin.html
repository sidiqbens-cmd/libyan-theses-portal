<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø±ÙƒØ² Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ù„ÙŠØ¨ÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-family: system-ui, sans-serif; background-color: #f1f5f9; font-size: 11px; }
        .nav-card { transition: all 0.3s ease; border-bottom: 4px solid transparent; }
        .nav-card:hover { transform: translateY(-3px); border-bottom-width: 6px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        input, select, textarea { border: 1px solid #cbd5e1 !important; padding: 4px 8px !important; outline: none; }
    </style>
</head>
<body class="p-4">

<div class="max-w-5xl mx-auto">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
        <a href="admin_libraries.html" class="nav-card bg-white p-5 rounded-xl shadow-sm border-b-green-500 flex flex-col items-center group text-center">
            <span class="text-3xl mb-2 group-hover:scale-110 transition">ğŸ¢</span>
            <span class="font-bold text-green-700 text-sm">Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</span>
            <div id="requestsCount" class="mt-2 px-3 py-1 bg-slate-100 text-slate-500 rounded-full font-bold text-[10px]">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</div>
        </a>

        <a href="#thesisForm" class="nav-card bg-white p-5 rounded-xl shadow-sm border-b-blue-500 flex flex-col items-center group text-center">
            <span class="text-3xl mb-2 group-hover:scale-110 transition">ğŸ“</span>
            <span class="font-bold text-blue-700 text-sm">Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø¹Ù„Ù…ÙŠØ©</span>
            <span class="text-gray-400 mt-2 text-[10px]">Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù„Ù„ÙÙ‡Ø±Ø³</span>
        </a>

        <a href="index.html" class="nav-card bg-white p-5 rounded-xl shadow-sm border-b-purple-500 flex flex-col items-center group text-center">
            <span class="text-3xl mb-2 group-hover:scale-110 transition">ğŸ”</span>
            <span class="font-bold text-purple-700 text-sm">ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¹Ø§Ù…Ø©</span>
            <span class="text-gray-400 mt-2 text-[10px]">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù„Ø¬Ù…Ù‡ÙˆØ±</span>
        </a>
    </div>

    <hr class="mb-8 border-slate-300">

    <div id="thesisForm" class="bg-white p-6 rounded-2xl shadow-md border border-slate-200">
        <h2 class="text-sm font-bold text-slate-800 mb-4 flex items-center gap-2">
            <span class="w-1 h-5 bg-blue-700 rounded-full"></span> Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
            <input type="text" id="researcher" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø«" class="w-full rounded bg-slate-50">
            <input type="text" id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©" class="w-full rounded bg-slate-50 font-bold">
        </div>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-5">
            <input type="number" id="year" placeholder="Ø§Ù„Ø³Ù†Ø©" class="w-full rounded bg-white border-blue-100">
            <input type="text" id="university" placeholder="Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©" class="w-full rounded bg-white border-blue-100">
            <select id="degree" class="w-full rounded bg-white font-bold"><option value="Ù…Ø§Ø¬Ø³ØªÙŠØ±">Ù…Ø§Ø¬Ø³ØªÙŠØ±</option><option value="Ø¯ÙƒØªÙˆØ±Ø§Ù‡">Ø¯ÙƒØªÙˆØ±Ø§Ù‡</option></select>
            <select id="status" class="w-full rounded bg-white text-green-700 font-bold"><option value="Ù…ØªÙˆÙØ±Ø©">Ù…ØªÙˆÙØ±Ø© âœ…</option><option value="ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©">ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© âŒ</option></select>
        </div>
        <button onclick="saveToDatabase()" class="w-full py-2 bg-blue-900 text-white rounded-lg font-bold text-xs shadow hover:bg-blue-800 transition-all">ğŸ’¾ Ø­ÙØ¸ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyAogBGo2_OzNito9D9AXVyAjSjmu-DYotc",
        authDomain: "libyan-theses-portal.firebaseapp.com",
        projectId: "libyan-theses-portal",
        databaseURL: "https://libyan-theses-portal-default-rtdb.europe-west1.firebasedatabase.app",
        appId: "1:80818219253:web:5ca7224ac6a5c8a7377dbc"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ù„Ù…Ù†Ø¹ Ø®Ø·Ø£ Initialization
    db.ref('libraries_directory').on('value', (snapshot) => {
        let currentCount = snapshot.numChildren() || 0;
        const countElement = document.getElementById('requestsCount');
        if (currentCount > 0) {
            countElement.innerHTML = `ğŸ”” ÙŠÙˆØ¬Ø¯ ${currentCount} Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©`;
            countElement.className = "mt-2 px-3 py-1 bg-red-600 text-white rounded-full font-bold text-[10px] animate-pulse shadow-sm";
        } else {
            countElement.innerText = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø§Ù†ØªØ¸Ø§Ø±";
            countElement.className = "mt-2 px-3 py-1 bg-green-50 text-green-600 rounded-full font-bold text-[10px] border border-green-200";
        }
    });

    function saveToDatabase() {
        const data = {
            researcher: document.getElementById('researcher').value,
            title: document.getElementById('title').value,
            university: document.getElementById('university').value,
            year: document.getElementById('year').value,
            degree: document.getElementById('degree').value,
            status: document.getElementById('status').value,
            timestamp: Date.now()
        };
        if(!data.title || !data.researcher) return alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©");
        db.ref('theses').push(data).then(() => {
            alert("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­");
            document.querySelectorAll('input').forEach(el => el.value = '');
        });
    }
</script>
</body>
</html>
